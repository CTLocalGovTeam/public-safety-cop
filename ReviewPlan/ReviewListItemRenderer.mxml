<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" 
				width="100%"
				verticalAlign="middle" horizontalScrollPolicy="off" 
				creationComplete="reviewListItemRendererCreationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import mx.controls.List;
			import mx.events.FlexEvent;

			private function reviewListItemRendererCreationCompleteHandler(event:FlexEvent):void
			{
				(this.parent.parent as List).addEventListener(ReviewPlanEvent.PLAN_SELECTED,planSelectedHandler);
				(this.parent.parent as List).addEventListener(ReviewPlanEvent.PLAN_LOADED,planLoadedHandler);
			}
			
			/**
			 * 
			 * Displays busy indicator when plan is selected
			 */
			private function planSelectedHandler(event:ReviewPlanEvent):void
			{
				if(dataLabel.text == event.dataObject.toString())
				{
					loadingImage.visible = true;
				}
			}
			
			/**
			 * 
			 * Removes busy indicator when plan is loaded
			 */
			private function planLoadedHandler(event:ReviewPlanEvent):void
			{
				if(dataLabel.text == event.dataObject.toString())
				{
					loadingImage.visible = false;
				}
			}

		]]>
	</fx:Script>
	<mx:Canvas width="100%" horizontalScrollPolicy="off" verticalScrollPolicy="off">
		<s:Label id="dataLabel" text="{data}" width="100%" left="0" 
				 showTruncationTip="true" maxDisplayedLines="1" />
		<mx:Image id="loadingImage" width="17" right="0" height="17"
				  source="widgets/ReviewPlan/assets/images/loader.swf"
				  visible="false"/>
	</mx:Canvas>
	
	
</mx:HBox>
